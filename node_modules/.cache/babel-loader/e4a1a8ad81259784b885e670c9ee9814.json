{"remainingRequest":"D:\\123\\shppingmall\\node_modules\\babel-loader\\lib\\index.js!D:\\123\\shppingmall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\123\\shppingmall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\123\\shppingmall\\node_modules\\vue-piczoom\\src\\components\\PicZoom.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\123\\shppingmall\\node_modules\\vue-piczoom\\src\\components\\PicZoom.vue","mtime":1522905033000},{"path":"D:\\123\\shppingmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660838990085},{"path":"D:\\123\\shppingmall\\node_modules\\babel-loader\\lib\\index.js","mtime":1660839010711},{"path":"D:\\123\\shppingmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660838990085},{"path":"D:\\123\\shppingmall\\node_modules\\vue-loader\\lib\\index.js","mtime":1660839006986}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    scale: {\n      type: Number,\n      default: 2.5\n    },\n    url: {\n      type: String,\n      required: true\n    },\n    bigUrl: {\n      type: String,\n      default: null\n    },\n    scroll: {\n      type: Boolean,\n      default: false\n    },\n    showEidt: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      id: null,\n      cover: null,\n      imgbox: null,\n      imgwrap: null,\n      orginUrl: null,\n      bigImgUrl: null,\n      bigOrginUrl: null,\n      imgUrl: null,\n      img: null,\n      canvas: null,\n      ctx: null,\n      rectTimesX: 0,\n      rectTimesY: 0,\n      imgTimesX: 0,\n      imgTimesY: 0,\n      init: false,\n      step: 0,\n      bigStep: 0,\n      vertical: false,\n      showImg: true\n    };\n  },\n  created: function created() {\n    var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';\n    /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/\n\n    var maxPos = $chars.length;\n    var str = '';\n\n    for (var i = 0; i < 10; i++) {\n      str += $chars.charAt(Math.floor(Math.random() * maxPos));\n    }\n\n    this.id = str;\n    this.imgUrl = this.url;\n    this.orginUrl = this.url;\n    this.bigImgUrl = this.bigUrl;\n    this.bigOrginUrl = this.bigUrl;\n  },\n  watch: {\n    url: function url(val) {\n      this.imgUrl = val;\n      this.orginUrl = val;\n      this.initTime();\n    },\n    bigUrl: function (_bigUrl) {\n      function bigUrl() {\n        return _bigUrl.apply(this, arguments);\n      }\n\n      bigUrl.toString = function () {\n        return _bigUrl.toString();\n      };\n\n      return bigUrl;\n    }(function () {\n      this.bigImgUrl = bigUrl;\n      this.bigOrginUrl = bigUrl;\n      this.initTime();\n    })\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.initTime();\n    });\n  },\n  methods: {\n    initTime: function initTime() {\n      var _this3 = this;\n\n      this.init = false;\n      var box = this.$refs[this.id];\n      this.imgbox = box;\n      this.cover = box.querySelector('.mouse-cover');\n      this.cover.style.width = this.imgbox.offsetWidth / this.scale + 'px';\n      this.cover.style.height = this.imgbox.offsetHeight / this.scale + 'px';\n      this.cover.style.left = '-100%';\n      this.cover.style.top = '-100%';\n      this.imgwrap = box.querySelector('img');\n      var imgsrc;\n\n      if (this.bigImgUrl) {\n        imgsrc = this.bigImgUrl;\n      } else {\n        imgsrc = this.imgUrl;\n      }\n\n      this.img = new Image();\n      this.img.src = imgsrc;\n\n      this.img.onload = function () {\n        _this3.rectTimesX = _this3.imgbox.offsetWidth / _this3.scale / _this3.imgwrap.offsetWidth, _this3.rectTimesY = _this3.imgbox.offsetHeight / _this3.scale / _this3.imgwrap.offsetHeight;\n        _this3.imgTimesX = _this3.img.width / _this3.imgwrap.offsetWidth, _this3.imgTimesY = _this3.img.height / _this3.imgwrap.offsetHeight;\n        _this3.vertical = _this3.img.width < _this3.img.height;\n        _this3.init = true;\n      };\n\n      if (this.canvas) {\n        this.canvas.parentNode.removeChild(this.canvas);\n        this.canvas = null;\n      }\n\n      this.canvas = document.createElement('canvas');\n      this.canvas.className = 'mouse-cover-canvas';\n      this.canvas.style.position = 'absolute';\n      this.canvas.style.left = this.imgbox.offsetLeft + this.imgbox.offsetWidth + 10 + 'px';\n      this.canvas.style.top = this.imgbox.offsetTop + 'px';\n      this.canvas.style.border = '1px solid #eee';\n      this.canvas.style.zIndex = '99999';\n      this.canvas.height = this.imgbox.offsetHeight;\n      this.canvas.width = this.imgbox.offsetWidth;\n      this.canvas.style.display = 'none';\n      document.body.append(this.canvas);\n      this.ctx = this.canvas.getContext(\"2d\");\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    },\n    initBox: function initBox() {\n      var _this4 = this;\n\n      this.showImg = false;\n      this.canvas.style.display = 'none';\n      var box = this.$refs[this.id];\n      var imgsrc;\n\n      if (this.bigImgUrl) {\n        imgsrc = this.bigImgUrl;\n      } else {\n        imgsrc = this.imgUrl;\n      }\n\n      this.img = new Image();\n      this.img.src = imgsrc;\n\n      this.img.onload = function () {\n        _this4.vertical = _this4.img.width < _this4.img.height;\n        _this4.showImg = true;\n        var thumb = box.querySelector('img');\n        setTimeout(function () {\n          _this4.rectTimesX = _this4.imgbox.offsetWidth / _this4.scale / box.querySelector('img').offsetWidth, _this4.rectTimesY = _this4.imgbox.offsetHeight / _this4.scale / box.querySelector('img').offsetHeight;\n        }, 20);\n      };\n    },\n    mousemove: function mousemove(e) {\n      if (!this.init) {\n        return false;\n      }\n\n      var _this = this; //获取实际的offset\n\n\n      function offset(curEle) {\n        var totalLeft = null,\n            totalTop = null,\n            par = curEle.offsetParent; //首先加自己本身的左偏移和上偏移\n\n        totalLeft += curEle.offsetLeft;\n        totalTop += curEle.offsetTop; //只要没有找到body，我们就把父级参照物的边框和偏移也进行累加\n\n        while (par) {\n          if (navigator.userAgent.indexOf(\"MSIE 8.0\") === -1) {\n            //累加父级参照物的边框\n            totalLeft += par.clientLeft;\n            totalTop += par.clientTop;\n          } //累加父级参照物本身的偏移\n\n\n          totalLeft += par.offsetLeft;\n          totalTop += par.offsetTop;\n          par = par.offsetParent;\n        }\n\n        return {\n          left: totalLeft,\n          top: totalTop\n        };\n      }\n\n      function getXY(eve) {\n        return {\n          x: eve.clientX - _this.cover.offsetWidth / 2,\n          y: eve.clientY - _this.cover.offsetHeight / 2\n        };\n      }\n\n      var oEvent = e || event;\n      var pos = getXY(oEvent);\n      var imgwrap = offset(this.imgwrap);\n      var range = {\n        minX: imgwrap.left,\n        maxX: imgwrap.left + this.imgwrap.offsetWidth - this.cover.offsetWidth,\n        minY: imgwrap.top - document.documentElement.scrollTop,\n        maxY: imgwrap.top - document.documentElement.scrollTop + this.imgwrap.offsetHeight - this.cover.offsetHeight\n      };\n\n      if (pos.x > range.maxX) {\n        pos.x = range.maxX;\n      }\n\n      if (pos.x < range.minX) {\n        pos.x = range.minX;\n      }\n\n      if (pos.y > range.maxY) {\n        pos.y = range.maxY;\n      }\n\n      if (pos.y < range.minY) {\n        pos.y = range.minY;\n      }\n\n      this.cover.style.left = pos.x + 'px';\n      this.cover.style.top = pos.y + 'px';\n      this.ctx.clearRect(0, 0, this.imgwrap.offsetWidth, this.imgwrap.offsetHeight);\n      var startX = pos.x - (imgwrap.left - document.documentElement.scrollLeft),\n          startY = pos.y - (imgwrap.top - document.documentElement.scrollTop);\n      this.ctx.drawImage(this.img, startX * this.imgTimesX, startY * this.imgTimesY, this.img.width * this.rectTimesX, this.img.height * this.rectTimesY, 0, 0, this.imgbox.offsetWidth, this.imgbox.offsetHeight);\n    },\n    mouseover: function mouseover(e) {\n      if (!this.init) {\n        return false;\n      }\n\n      e = e || event;\n\n      if (!this.scroll) {\n        e.currentTarget.addEventListener(\"mousewheel\", function (ev) {\n          ev.preventDefault();\n        }, false);\n        e.currentTarget.addEventListener(\"DOMMouseScroll\", function (ev) {\n          ev.preventDefault();\n        }, false);\n      }\n\n      this.cover.style.display = 'block';\n      this.canvas.style.display = 'block';\n    },\n    mouseleave: function mouseleave() {\n      if (!this.init) {\n        return false;\n      }\n\n      this.cover.style.display = 'none';\n      this.canvas.style.display = 'none';\n    },\n    rotate: function rotate(direction) {\n      var _this5 = this;\n\n      var orginImg = new Image();\n      orginImg.crossOrigin = \"Anonymous\";\n      orginImg.src = this.orginUrl;\n\n      orginImg.onload = function () {\n        _this5.rotateImg(orginImg, direction, _this5.step);\n      };\n\n      if (this.bigOrginUrl) {\n        var bigOrginImg = new Image();\n        orginImg.crossOrigin = \"Anonymous\";\n        bigOrginImg.src = this.bigOrginUrl;\n\n        bigOrginImg.onload = function () {\n          _this5.rotateImg(bigOrginImg, direction, _this5.bigStep, true);\n        };\n      }\n    },\n    rotateImg: function rotateImg(img, direction, step) {\n      var _this6 = this;\n\n      var isBig = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var min_step = 0;\n      var max_step = 3;\n      if (img == null) return; //img的高度和宽度不能在img元素隐藏后获取，否则会出错    \n\n      var height = img.height;\n      var width = img.width;\n\n      if (step == null) {\n        step = min_step;\n      }\n\n      if (direction == 'right') {\n        step++; //旋转到原位置，即超过最大值    \n\n        step > max_step && (step = min_step);\n      } else {\n        step--;\n        step < min_step && (step = max_step);\n      }\n\n      var canvas = document.createElement('canvas'); //旋转角度以弧度值为参数    \n\n      var degree = step * 90 * Math.PI / 180;\n      var ctx = canvas.getContext('2d');\n      canvas.width = height;\n      canvas.height = width;\n      ctx.rotate(degree);\n      ctx.drawImage(img, 0, -height);\n\n      switch (step) {\n        case 0:\n          canvas.width = width;\n          canvas.height = height;\n          ctx.drawImage(img, 0, 0);\n          break;\n\n        case 1:\n          canvas.width = height;\n          canvas.height = width;\n          ctx.rotate(degree);\n          ctx.drawImage(img, 0, -height);\n          break;\n\n        case 2:\n          canvas.width = width;\n          canvas.height = height;\n          ctx.rotate(degree);\n          ctx.drawImage(img, -width, -height);\n          break;\n\n        case 3:\n          canvas.width = height;\n          canvas.height = width;\n          ctx.rotate(degree);\n          ctx.drawImage(img, -width, 0);\n          break;\n      }\n\n      var newImg = canvas.toDataURL();\n\n      if (isBig) {\n        this.bigImgUrl = newImg;\n        this.bigStep = step;\n        this.initBox();\n      } else {\n        this.imgUrl = newImg;\n        this.step = step;\n        this.$nextTick(function () {\n          _this6.initBox();\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["PicZoom.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"magnifier-box\" :class=\"vertical?'vertical':''\" :ref=\"id\" @mousemove=\"mousemove\" @mouseover=\"mouseover\" @mouseleave=\"mouseleave\">\r\n        <img v-show=\"showImg\" :src=\"imgUrl\" alt=\"\">\r\n        <div class=\"mouse-cover\"></div>\r\n        <div class=\"edit-wrap\" v-if=\"showEidt\">\r\n            <span class=\"rotate-left\" @click=\"rotate('left')\"></span>\r\n            <span class=\"rotate-right\" @click=\"rotate('right')\"></span>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        props:{\r\n            scale:{\r\n                type:Number,\r\n                default:2.5\r\n            },\r\n            url:{\r\n                type:String,\r\n                required:true\r\n            },\r\n            bigUrl:{\r\n                type:String,\r\n                default:null\r\n            },\r\n            scroll:{\r\n                type:Boolean,\r\n                default:false\r\n            },\r\n            showEidt:{\r\n                type:Boolean,\r\n                default:false\r\n            }\r\n        },\r\n        data () {\r\n            return {\r\n                id:null,\r\n                cover:null,\r\n                imgbox:null,\r\n                imgwrap:null,\r\n                orginUrl:null,\r\n                bigImgUrl:null,\r\n                bigOrginUrl:null,\r\n                imgUrl:null,\r\n                img:null,\r\n                canvas:null,\r\n                ctx:null,\r\n                rectTimesX:0,\r\n                rectTimesY:0,\r\n                imgTimesX:0,\r\n                imgTimesY:0,\r\n                init:false,\r\n                step:0,\r\n                bigStep:0,\r\n                vertical:false,\r\n                showImg:true\r\n            }\r\n        },\r\n        created(){\r\n        　　var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';    /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/\r\n        　　var maxPos = $chars.length;\r\n        　　var str = '';\r\n        　　for (let i = 0; i < 10; i++) {\r\n                str += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n        　　}\r\n            this.id=str\r\n            this.imgUrl=this.url\r\n            this.orginUrl=this.url\r\n            this.bigImgUrl=this.bigUrl\r\n            this.bigOrginUrl=this.bigUrl\r\n        },\r\n        watch:{\r\n            url:function(val){\r\n                this.imgUrl=val\r\n                this.orginUrl=val\r\n                this.initTime()\r\n            },\r\n            bigUrl:function(){\r\n                this.bigImgUrl=bigUrl\r\n                this.bigOrginUrl=bigUrl\r\n                this.initTime()\r\n            }\r\n        },\r\n        mounted(){\r\n            this.$nextTick(()=>{\r\n                this.initTime()\r\n            })\r\n        },\r\n        methods: {\r\n            initTime(){\r\n                this.init=false\r\n                let box=this.$refs[this.id]\r\n                this.imgbox=box\r\n                this.cover=box.querySelector('.mouse-cover')\r\n                this.cover.style.width=(this.imgbox.offsetWidth/this.scale)+'px'\r\n                this.cover.style.height=(this.imgbox.offsetHeight/this.scale)+'px'\r\n                this.cover.style.left='-100%'\r\n                this.cover.style.top='-100%'\r\n                this.imgwrap=box.querySelector('img')\r\n                let imgsrc;\r\n                if(this.bigImgUrl){\r\n                    imgsrc=this.bigImgUrl\r\n                }else{\r\n                    imgsrc=this.imgUrl\r\n                }\r\n                \r\n                this.img=new Image()\r\n                this.img.src=imgsrc\r\n                this.img.onload=()=>{\r\n                    this.rectTimesX=(this.imgbox.offsetWidth/this.scale)/this.imgwrap.offsetWidth,\r\n                    this.rectTimesY=(this.imgbox.offsetHeight/this.scale)/this.imgwrap.offsetHeight\r\n                    this.imgTimesX=this.img.width/this.imgwrap.offsetWidth,\r\n                    this.imgTimesY=this.img.height/this.imgwrap.offsetHeight\r\n                    this.vertical=this.img.width<this.img.height\r\n                    this.init=true\r\n                }\r\n                if(this.canvas){\r\n                    this.canvas.parentNode.removeChild(this.canvas);\r\n                    this.canvas=null\r\n                }\r\n                this.canvas=document.createElement('canvas')\r\n                this.canvas.className='mouse-cover-canvas'\r\n                this.canvas.style.position='absolute'\r\n                this.canvas.style.left=this.imgbox.offsetLeft+this.imgbox.offsetWidth+10+'px'\r\n                this.canvas.style.top=this.imgbox.offsetTop+'px'\r\n                this.canvas.style.border='1px solid #eee'\r\n                this.canvas.style.zIndex='99999'\r\n                this.canvas.height=this.imgbox.offsetHeight\r\n                this.canvas.width=this.imgbox.offsetWidth\r\n                this.canvas.style.display='none'\r\n                document.body.append(this.canvas)\r\n                this.ctx=this.canvas.getContext(\"2d\");\r\n                this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\r\n            },\r\n            initBox(){\r\n                this.showImg=false\r\n                this.canvas.style.display='none'\r\n                let box=this.$refs[this.id]\r\n                let imgsrc;\r\n                if(this.bigImgUrl){\r\n                    imgsrc=this.bigImgUrl\r\n                }else{\r\n                    imgsrc=this.imgUrl\r\n                    \r\n                }\r\n                this.img=new Image()\r\n                this.img.src=imgsrc\r\n                this.img.onload=()=>{\r\n                    this.vertical=this.img.width<this.img.height\r\n                    this.showImg=true\r\n                    let thumb=box.querySelector('img')\r\n                    setTimeout(() => {\r\n                        this.rectTimesX=(this.imgbox.offsetWidth/this.scale)/box.querySelector('img').offsetWidth,\r\n                        this.rectTimesY=(this.imgbox.offsetHeight/this.scale)/box.querySelector('img').offsetHeight\r\n                    }, 20);\r\n                }\r\n                \r\n            },\r\n            mousemove(e){\r\n                if(!this.init){\r\n                    return false\r\n                }\r\n                let _this=this\r\n                //获取实际的offset\r\n                function offset(curEle){\r\n                    var totalLeft = null,totalTop = null,par = curEle.offsetParent;\r\n                    //首先加自己本身的左偏移和上偏移\r\n                    totalLeft+=curEle.offsetLeft;\r\n                    totalTop+=curEle.offsetTop\r\n                    //只要没有找到body，我们就把父级参照物的边框和偏移也进行累加\r\n                    while(par){\r\n                        if(navigator.userAgent.indexOf(\"MSIE 8.0\")===-1){\r\n                        //累加父级参照物的边框\r\n                        totalLeft+=par.clientLeft;\r\n                        totalTop+=par.clientTop\r\n                        }\r\n                        \r\n                        //累加父级参照物本身的偏移\r\n                        totalLeft+=par.offsetLeft;\r\n                        totalTop+=par.offsetTop\r\n                        par = par.offsetParent;\r\n                    }\r\n                \r\n                    return{\r\n                        left:totalLeft,\r\n                        top:totalTop\r\n                    }\r\n                }\r\n\r\n                function getXY(eve) {\r\n                    return {\r\n                        x : eve.clientX -(_this.cover.offsetWidth/2),\r\n                        y : eve.clientY-(_this.cover.offsetHeight/2) \r\n                    };\r\n                }\r\n                let oEvent = e || event;\r\n                let pos = getXY(oEvent);\r\n                let imgwrap=offset(this.imgwrap)\r\n                let range={\r\n                    minX:imgwrap.left,\r\n                    maxX:imgwrap.left+this.imgwrap.offsetWidth-this.cover.offsetWidth,\r\n                    minY:imgwrap.top-document.documentElement.scrollTop,\r\n                    maxY:imgwrap.top-document.documentElement.scrollTop+this.imgwrap.offsetHeight-this.cover.offsetHeight,\r\n                }\r\n                if(pos.x>range.maxX){\r\n                    pos.x=range.maxX\r\n                }\r\n                if(pos.x<range.minX){\r\n                    pos.x=range.minX\r\n                }\r\n                if(pos.y>range.maxY){\r\n                    pos.y=range.maxY\r\n                }\r\n                if(pos.y<range.minY){\r\n                    pos.y=range.minY\r\n                }\r\n                this.cover.style.left=pos.x+'px'\r\n                this.cover.style.top=pos.y+'px'\r\n                this.ctx.clearRect(0,0,this.imgwrap.offsetWidth,this.imgwrap.offsetHeight);\r\n                let startX=pos.x-(imgwrap.left-document.documentElement.scrollLeft),\r\n                startY=pos.y-(imgwrap.top-document.documentElement.scrollTop)\r\n                this.ctx.drawImage(this.img,startX*this.imgTimesX,startY*this.imgTimesY,this.img.width*this.rectTimesX,this.img.height*this.rectTimesY,0,0,this.imgbox.offsetWidth,this.imgbox.offsetHeight);\r\n                \r\n            },\r\n            mouseover(e){\r\n                if(!this.init){\r\n                    return false\r\n                }\r\n                e=e||event\r\n                if(!this.scroll){\r\n                    e.currentTarget.addEventListener(\"mousewheel\",function(ev){\r\n                        ev.preventDefault();\r\n                    },false);\r\n\r\n                    e.currentTarget.addEventListener(\"DOMMouseScroll\",function(ev){\r\n                        ev.preventDefault();\r\n                    },false);\r\n                }\r\n                \r\n                this.cover.style.display='block'\r\n                this.canvas.style.display='block'\r\n            },\r\n            mouseleave(){\r\n                if(!this.init){\r\n                    return false\r\n                }\r\n                this.cover.style.display='none'\r\n                this.canvas.style.display='none'\r\n            },\r\n            rotate(direction){\r\n                var orginImg=new Image()\r\n                orginImg.crossOrigin = \"Anonymous\";\r\n                orginImg.src=this.orginUrl\r\n                orginImg.onload=()=>{\r\n                    this.rotateImg(orginImg,direction,this.step)\r\n                }\r\n                if(this.bigOrginUrl){\r\n                    var bigOrginImg=new Image()\r\n                    orginImg.crossOrigin = \"Anonymous\";\r\n                    bigOrginImg.src=this.bigOrginUrl\r\n                    bigOrginImg.onload=()=>{\r\n                        this.rotateImg(bigOrginImg,direction,this.bigStep,true)\r\n                    }\r\n                }\r\n                \r\n            },\r\n            rotateImg(img,direction,step,isBig=false){\r\n                var min_step = 0;\r\n                var max_step = 3;\r\n                if (img == null) return;\r\n                //img的高度和宽度不能在img元素隐藏后获取，否则会出错    \r\n                var height = img.height;\r\n                var width = img.width;\r\n                \r\n                if (step == null) {\r\n                    step = min_step;\r\n                }\r\n                if (direction == 'right') {\r\n                    step++;\r\n                    //旋转到原位置，即超过最大值    \r\n                    step > max_step && (step = min_step);\r\n                } else {\r\n                    step--;\r\n                    step < min_step && (step = max_step);\r\n                }   \r\n                var canvas = document.createElement('canvas')  \r\n                \r\n                //旋转角度以弧度值为参数    \r\n                var degree = step * 90 * Math.PI / 180;\r\n                var ctx = canvas.getContext('2d');\r\n                canvas.width = height;\r\n                canvas.height = width;\r\n                ctx.rotate(degree);\r\n                ctx.drawImage(img, 0, -height);\r\n                switch (step) {\r\n                    case 0:\r\n                        canvas.width = width;\r\n                        canvas.height = height;\r\n                        ctx.drawImage(img, 0, 0);\r\n                        break;\r\n                    case 1:\r\n                        canvas.width = height;\r\n                        canvas.height = width;\r\n                        ctx.rotate(degree);\r\n                        ctx.drawImage(img, 0, -height);\r\n                        break;\r\n                    case 2:\r\n                        canvas.width = width;\r\n                        canvas.height = height;\r\n                        ctx.rotate(degree);\r\n                        ctx.drawImage(img, -width, -height);\r\n                        break;\r\n                    case 3:\r\n                        canvas.width = height;\r\n                        canvas.height = width;\r\n                        ctx.rotate(degree);\r\n                        ctx.drawImage(img, -width, 0);\r\n                        break;\r\n                }\r\n                var newImg=canvas.toDataURL()\r\n                \r\n                if(isBig){\r\n                    this.bigImgUrl=newImg\r\n                    this.bigStep=step\r\n                    this.initBox()\r\n                }else{\r\n                    this.imgUrl=newImg\r\n                    this.step=step\r\n                    this.$nextTick(()=>{\r\n                        this.initBox()\r\n                    })\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .magnifier-box{\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        overflow: hidden;\r\n        position: relative;\r\n        .edit-wrap{\r\n            position: absolute;\r\n            top: 5px;\r\n            right: 0;\r\n            z-index: 9999999;\r\n            background: rgba(0,0,0,0.4);\r\n            padding: 5px 15px 0 15px;\r\n            border-radius: 15px;\r\n            .rotate-left{\r\n                display: inline-block;\r\n                cursor: pointer;\r\n                width: 16px;\r\n                height: 16px;\r\n                background: url(../rotate.png);\r\n                background-size: 100% 100%;\r\n                -moz-transform:scaleX(-1);\r\n                -webkit-transform:scaleX(-1);\r\n                -o-transform:scaleX(-1);\r\n                transform:scaleX(-1);\r\n                /*IE*/\r\n                filter:FlipH;\r\n            }\r\n            .rotate-right{\r\n                margin-left: 10px;\r\n                cursor: pointer;\r\n                display: inline-block;\r\n                width: 16px;\r\n                height: 16px;\r\n                background: url(../rotate.png);\r\n                background-size: 100% 100%;\r\n            }\r\n        }\r\n        img{\r\n            width: 100%;\r\n        };\r\n        .mouse-cover{\r\n            position: fixed;\r\n            background-color: rgba(0,0,0,0.5);\r\n            cursor:move\r\n        };\r\n        .mouse-cover-canvas{\r\n            position:fixed;\r\n            left:100%;\r\n            top:0;\r\n            width:100%;\r\n            height:100%;\r\n        }\r\n        &.vertical{\r\n            img{\r\n                height: 100%;\r\n                width: auto\r\n            }\r\n        }\r\n    }\r\n</style>\r\n\r\n"],"sourceRoot":"node_modules/vue-piczoom/src/components"}]}